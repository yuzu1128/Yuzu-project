# 🐛 バグ改善チェックリスト

## 1. データ移行関連のバグ
- [ ] **LocalStorageキー名の不一致**
  - 問題: メインアプリは `studySubjects`/`studyProgress` を使用
  - 移行ツールが間違ったキー名を使用していた可能性
  - 修正: 両方で同じキー名を使用するよう統一

- [ ] **データ形式の不整合**
  - 問題: 古いデータ形式と新しいデータ形式の互換性
  - 修正: データ移行時に形式を検証・変換

- [ ] **データ上書き時の確認不足**
  - 問題: 既存データを警告なしに上書き
  - 修正: バックアップ機能と確認ダイアログの実装

## 2. 表示関連のバグ
- [ ] **科目データが表示されない**
  - 問題: データは保存されているが画面に反映されない
  - 修正: updateDisplay()の呼び出しタイミング確認

- [ ] **進捗率の計算エラー**
  - 問題: 100%を超える、負の値になるなど
  - 修正: Math.min(100, percentage)で上限設定

- [ ] **チャートの初期化エラー**
  - 問題: Chart.jsが読み込まれる前にアクセス
  - 修正: 読み込み待機処理の追加

## 3. 機能関連のバグ
- [ ] **共有URL生成の文字数制限**
  - 問題: URLが長すぎてブラウザの制限を超える
  - 修正: データ圧縮アルゴリズムの実装

- [ ] **データインポート/エクスポートの失敗**
  - 問題: JSONパースエラー、ファイル形式の問題
  - 修正: try-catchでエラーハンドリング

- [ ] **今日の進捗更新が反映されない**
  - 問題: 日付の扱い、タイムゾーンの問題
  - 修正: toISOString().split('T')[0]で統一

## 4. パフォーマンス関連
- [ ] **大量データ時の動作遅延**
  - 問題: 全データを毎回再計算
  - 修正: 必要な部分のみ更新

## 5. セキュリティ・データ保護
- [ ] **データ消失リスク**
  - 問題: 誤操作でデータが消える
  - 修正: 自動バックアップ機能

## 修正優先度
1. 🔴 **最優先**: データ移行の確実な動作
2. 🟠 **高**: LocalStorageキー名の統一
3. 🟡 **中**: エラーハンドリングの強化
4. 🟢 **低**: UI/UXの改善

## テスト項目
1. データ移行ツールでインポート → メインアプリで確認
2. メインアプリでデータ追加 → リロード後も保持
3. 共有URL生成 → 別ブラウザで開く
4. エクスポート → インポートの往復テスト